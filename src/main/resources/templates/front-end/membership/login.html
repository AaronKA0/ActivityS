<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>會員登入</title>


<!-- 前台畫面header的引入文件-->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap">

<!-- 引入 Bootstrap CSS 文件 -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
	crossorigin="anonymous">
<!-- 前台畫面header的引入文件-->

<style>
main {
	min-height: calc(100vh - 70px);
	/* 設定 main 區域的最小高度，確保 footer 固定在底部 */
}

/* form {
            max-width: 400px;
            margin: 0 auto;
        } */
/*調整框框長度用*/
.form-group {
	margin-bottom: 20px;
}

span.fs-4{
	font-size: 36px;
	font-weight: bold;
}

.controls-float .form-control {
	transition: all 0.3s;
	padding: 0.5rem 0rem;
	width: 50%;
	font-size: 14px;
	border: none;
	border-bottom: 1px solid #DEDEDE;
	height: 40x;
	font-size: 18px;
	display: block; /* 設置為區塊元素，以便使用 margin:auto */
	margin: auto; /* 將左右邊距設置為auto，使其水平置中 */
	margin-top: 20px; /* 可選：設置頂部邊距以進行垂直置中，根據需要調整 */
}

ul {
	list-style-type: none;
	padding: 0;
	margin: 0;
}

#submit {
	border: 1px solid black;
	color: black;
	padding: 10px 10px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 16px;
	width: 50%;
	background-color: white; /* 新增這一行，設定背景為白色 */
	display: block; /* 設置為區塊元素，以便使用 margin:auto */
	margin: auto; /* 將左右邊距設置為auto，使其水平置中 */
	margin-top: 20px; /* 可選：設置頂部邊距以進行垂直置中，根據需要調整 */
}

#submit:hover {
	border: 1px solid #CFDFEF;
	background-color: #CFDFEF;
}

a {
	color: black;
	font-size: 18px;
}

a#loginSection {
	text-decoration: none;
	font-size: 23px;
	font-weight: normal; /* 初始字体粗细 */
}

a#loginSection:hover, a#loginSection:active {
	text-decoration: underline; /* 鼠标悬停或点击时显示底线 */
	font-weight: bold; /* 鼠标悬停或点击时加粗字体 */
}

a#signupSection {
	text-decoration: none;
	font-size: 23px;
	font-weight: normal; /* 初始字体粗细 */
}

a#signupSection:hover, a#signupSection:active {
	text-decoration: underline; /* 鼠标悬停或点击时显示底线 */
	font-weight: bold; /* 鼠标悬停或点击时加粗字体 */
}

#center2 {
	margin-left: 40%;
}

#forgetpassword {
	margin-left: 70%;
	text-decoration: none;
	border: 1px solid rgb(211, 206, 206);
	padding: 6px 6px;
	font-size: 15px;
}

#forgetpassword:hover {
	margin-left: 70%;
	text-decoration: none;
	padding: 6px 6px;
	font-size: 15px;
	background-color: rgb(224, 220, 220);
	color: rgb(249, 249, 249);
}

h6 {
	margin-left: 25%;
	font-weight: bold;
}

#memAcc-error {
	color: red;
	margin-left: 45%;
}

#memPwd-error {
	color: red;
	margin-left: 45%;
}

div#errorMessage {
	font-size: 20px;
	margin-left: 39%;
	color: red;
}

p {
	color: red;
	margin-left: 40%;
}

button#SignOut {
	background-color: pink;
	border: 1px solid pink;
	color: gary;
}

button#SignOut:hover {
	border: 1px solid pink;
	background-color: white;
	color: gary;
}
</style>
</head>

<body>


	<div class="container">
		<header
			class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
			<div class="col-md-3 mb-2 mb-md-0">
				<a href='select_page'
					class="d-inline-flex link-body-emphasis text-decoration-none">
					<span class="fs-4"><img alt="ZuoHuo" src="/front-end/16/images/ZuoHuo4.jpg" width="160px" ></span>
				</a>
			</div>


			<ul
				class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
				<li><a th:href="@{/membership/ZuoHuo}" class="nav-link px-2 link-secondary">首頁</a></li>
				<li><a href="join.html" class="nav-link px-2 link-secondary">瀏覽活動</a></li>
				<li><a href="create.html" class="nav-link px-2 link-secondary">舉辦活動</a></li>
				<li><a href="rent.html" class="nav-link px-2 link-secondary">場地租借</a></li>
				<li><a th:href="@{/faq/faqs}" 
					class="nav-link px-2 link-secondary">FAQs</a></li>
				<li><a th:href="@{/faq/faqs}"  class="nav-link px-2 link-secondary">關於我們</a></li>
			</ul>

			<div class="col-md-3 text-end">
                <button type="button" class="btn btn-outline-primary me-2">
                    <a class="nav-link" th:href="@{/membership/logging}">登入</a>
                </button>
                <button type="button" class="btn btn-primary">
                    <a class="nav-link" th:href="@{/membership/addMembership}">註冊</a>
                </button>
            </div>
		</header>
	</div>

	<!-- ------------------------------------------------------------ -->

	<main class="container mt-5">

		<div id="center">
<!-- 			<button id="SignOut" type="button">會員登出</button> -->
			<div id="center2">
				<!-- 加入會員超链接 -->
				<a id="signupSection" href='addMembership'>加入會員</a>

				<!-- 登入超链接 -->
				<a id="loginSection" href='login'>會員登入</a>




				<!-- 其他内容 -->

				<!-- 加入會員部分 -->
				<div id="signupSection">
					<!-- 加入會員表单等内容 -->
				</div>

				<!-- 登入部分 -->
				<div id="loginSection">
					<!-- 登入表单等内容 -->
				</div>
			</div>
			<form id="yourFormId" th:action="@{login}" method="post"
				th:object="${membershipVO}" enctype="multipart/form-data">
				<a id="forgetpassword" href='forgetpassword'>忘記密碼</a>

				<h6>會員帳號登入</h6>
				<ul>

					<li class="controls-float"><label class="title"
						for="registerMemAcc"></label> <input class="form-control text"
						id="registerMemAcc" type="text" placeholder=" Account 會員帳號"
						autocomplete="off" name="memAcc" /> <span class="error-message"
						id="memAcc-error"></span><span id="memAcc-error2"></span></li>

					<li class="controls-float"><label class="title"
						for="registerMemPwd"></label> <input class="form-control text"
						id="registerMemPwd" type="password" placeholder="Password 會員密碼"
						autocomplete="off" name="memPwd" /> <span class="error-message"
						id="memPwd-error"></span></li>

					<p th:text="${errorMessage}"></p>

				</ul>
				<div>
					<br>
					<button type="submit" id="submit">會員登入</button>
				</div>
				<h7 th:text="${session.memId}"></h7>
				<h7 th:text="${session.memName}"></h7>
				<h7 th:text="${session.IsAccEna}"></h7>
				<!--要取session 需要session.memId-->
			</form>
		</div>
	</main>

	<!-- ------------------------------------------------------------ -->


	<div class="container">
		<footer class="py-3 my-4">
			<ul class="nav justify-content-center border-bottom pb-3 mb-3">
				<li class="nav-item"><a href="index.html"
					class="nav-link px-2 text-muted">首頁</a></li>
				<li class="nav-item"><a href="customer.html"
					class="nav-link px-2 text-muted">客服中心</a></li>
				<li class="nav-item"><a href="about.html"
					class="nav-link px-2 text-muted">關於我們</a></li>
			</ul>
			<p class="text-center text-muted">© 2023 Company, Inc</p>
		</footer>
	</div>

	<!-- 登入選項的Modal 彈窗 -->
	<!-- 	<div class="modal fade" id="loginModal" tabindex="-1" -->
	<!-- 		aria-labelledby="loginModalLabel" aria-hidden="true"> -->
	<!-- 		<div class="modal-dialog"> -->
	<!-- 			<div class="modal-content"> -->
	<!-- 				<div class="modal-header"> -->
	<!-- 					<h5 class="modal-title" id="loginModalLabel">會員登入</h5> -->
	<!-- 					<button type="button" class="btn-close" data-bs-dismiss="modal" -->
	<!-- 						aria-label="Close"></button> -->
	<!-- 				</div> -->
	<!-- 				<div class="modal-body"> -->
	<!-- 					在這裡加入登入表單的 HTML 代碼 -->
	<!-- 					<form> -->
	<!-- 						登入表單的輸入欄位 -->
	<!-- 						<div class="mb-3"> -->
	<!-- 							<label for="username" class="form-label">帳號：</label> <input -->
	<!-- 								type="text" class="form-control" id="username" name="username" -->
	<!-- 								placeholder="輸入您的帳號" required> -->
	<!-- 						</div> -->
	<!-- 						<div class="mb-3"> -->
	<!-- 							<label for="password" class="form-label">密碼：</label> -->
	<!-- 							<div class="input-group"> -->
	<!-- 								<input type="password" class="form-control" id="password" -->
	<!-- 									name="password" placeholder="輸入您的密碼" required> -->
	<!-- 								在密碼輸入框右上方新增"忘記密碼"的連結 -->
	<!-- 								<a href="#" class="input-group-text" id="forgotPasswordLink">忘記密碼</a> -->
	<!-- 							</div> -->
	<!-- 						</div> -->
	<!-- 						登入按鈕 -->
	<!-- 						<button type="submit" class="btn btn-primary">登入</button> -->
	<!-- 					</form> -->

	<!-- 				</div> -->
	<!-- 			</div> -->
	<!-- 		</div> -->
	<!-- 	</div> -->

	<!-- ----------------------------引入文件--------------------------------- -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<!-- ----------------------------引入文件--------------------------------- -->


	<script>
		// --------------------- 以下為memAcc帳號的判斷------------------------

		$(document).ready(function() {
			$("#registerMemAcc").on("input", function() {
				var memAccValue = $(this).val();
				if (memAccValue.length < 5) {
					$("#memAcc-error").text("帳號長度至少為5個字").show();
				} else {
					$("#memAcc-error").hide();
				}
			});
		});

		// ------------------------------------------------------
		$(document).ready(function() {
			$("#yourFormId").submit(function() {
				var memAccValue = $("#registerMemAcc").val();
				if (memAccValue.length < 1) {
					$("#memAcc-error").text("請輸入帳號").show();
					return false; // 阻止表單提交
				} else {
					$("#memAcc-error").hide();
					return true; // 允許表單提交
				}
			});
		});

		// ----------------------- 以下為memPwd密碼的判斷------------------------------
		$(document).ready(function() {
			$("#registerMemPwd").on("input", function() {
				var memPwdValue = $(this).val();
				if (memPwdValue.length < 8) {
					$("#memPwd-error").text("密碼長度至少為8個字").show();
				} else {
					$("#memPwd-error").hide();
				}
			});
		});

		// ------------------------------------------------------
		$(document).ready(function() {
			$("#yourFormId").submit(function() {
				var memPwdValue = $("#registerMemPwd").val();
				if (memPwdValue.length < 1) {
					$("#memPwd-error").text("請輸入密碼").show();
					return false; //阻止表單提交
				} else {
					$("#memPwd-error").hide();
					return true; //允許表單提交
				}
			});

		});

		// ------------------------登出-------------------------
		
		document.getElementById("SignOut").addEventListener("click",
				function() {
					// 使用 XMLHttpRequest 或 Fetch API 發送登出請求到後端
					var xhr = new XMLHttpRequest();
					xhr.open("GET", "/membership/logout", true);            //這行設置了請求的類型（GET）、URL（"/membership/logout"）和是否使用異步（true，表示異步執行）。

					xhr.onreadystatechange = function() {                   //當請求的狀態發生變化時（例如，完成了請求或發生了錯誤），這個函數將被觸發。
						if (xhr.readyState == 4 && xhr.status == 200) {     //是否已經完成（readyState == 4）並且是否成功（status == 200）。如果是，表示登出請求成功。
							// 處理登出成功的回應，這裡將重新導向到登入頁面
							window.location.href = "/membership/login";     //重新導向到登入頁面
						} 
					};

					xhr.send();
				});
		
		
	</script>



</body>

</html>

