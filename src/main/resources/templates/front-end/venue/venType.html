<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>場地租借</title>
  <!-- 引入 Bootstrap CSS 文件 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  
  <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" th:href="@{/front-end/07/css/booking.css}">
  
  <style>
    main {
      min-height: calc(100vh - 70px);
    }

    #top {
      margin-bottom: 30px;
    }
    
    /* ===== 重要性的星號 ===== */
 	div.star_block,
 	div.com_star { 
 	  display: inline-block;
 	} 
 	div.star_block > span.star,
 	div.com_star > span.star {
 	  display: inline-block;
	  margin-right: 3px;
 	} 
	div.star_block > span.star.-on,
	div.com_star > span.star.-on {
	  color: yellow;
	}

  </style>
</head>

<body>
 
  <div class="container">
    <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
      <div class="col-md-3 mb-2 mb-md-0">
        <a href="index.html" class="d-inline-flex link-body-emphasis text-decoration-none">
          <span class="fs-4">做伙</span>
        </a>
      </div>

      <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li><a href="index.html" class="nav-link px-2 link-secondary">首頁</a></li>
        <li><a href="join.html" class="nav-link px-2 link-secondary">瀏覽活動</a></li>
        <li><a href="create.html" class="nav-link px-2 link-secondary">舉辦活動</a></li>
        <li><a href="rent.html" class="nav-link px-2 link-secondary">場地租借</a></li>
        <li><a href="customer.html" class="nav-link px-2 link-secondary">FAQs</a></li>
        <li><a href="about.html" class="nav-link px-2 link-secondary">關於我們</a></li>
      </ul>

      <div class="col-md-3 text-end">
        <button type="button" class="btn btn-outline-primary me-2"><a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">登入</a></button>
        <button type="button" class="btn btn-primary"><a class="nav-link" href="register.html">註冊</a></button>
      </div>
      
    </header>
  </div>

  <main class="container mt-4">
    <div style="display: block; text-align: center;">
      <select id="venuepicker" class="form-select" aria-label="Default select example" style="width: 450px; display: inline-block;">
        <option value="" selected>請選擇場地</option>
        <!-- 嵌入所有場地資料庫 -->
        
      </select>
      
      <input type="text" id="datepicker" class="form-select" aria-label="Default select example" value="請選擇日期" style="width: 450px; display: inline-block; margin-left: 50px;">
    </div>
    
    <!-- --------------------- 場地詳情內容 --------------------- -->
    <section id="venue-rental" class="mt-5">   
      
      <div id="ven-title" style="display: flex; justify-content: space-between; margin-bottom: 10px;">
        <div id="ven-name" style="font-size: 28px;"></div>          <!-- 場地名稱 -->
        <button id="bookingnow" class="btn btn-outline-primary me-2" style="margin-bottom: 10px;">立即預訂</button>                                               
      </div>
      
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <div class="col" style="width: 60%;">
            <div class="card">
                <img src="" id="ven-photo" class="card-img-top" style="height: 440px;"> <!-- 場地照片 -->
              
            </div>
        </div>
        
        <div class="col" style="width: 40%;">
            <div class="card" style="height: 440px; overflow-y: scroll;">
                <div class="card-body" style="flex: none; height: 50%;">
   
                    <div class="star_block">
	                    <span class="star" data-star="1"></span>
	                    <span class="star" data-star="2"></span>
	                    <span class="star" data-star="3"></span>
	                    <span class="star" data-star="4"></span>
	                    <span class="star" data-star="5"></span>
                    </div>
                    <span style="font-weight: bold; margin-left: 5px;" id="ven-star"></span>
                    
                    <h3 id="ven-location" class="card-title"></h3>  <!-- 場地地點 -->
	                <p class="card-text">適合活動</p>
	                <ul>
		                <li id="ven-descr"></li>                    <!-- 場地描述 -->
		                <li style="color:gray; list-style: none;">為確保安全，房內、公共區設有監視器。</li>
		                <li id="ven-price" style="list-style: none;"></li>  <!-- 場地租金 -->                       
	                </ul>
                </div>
                <!-- ----------------- 場地評論 ----------------- -->
                <div style="font-size: 20px; margin-left: 20px;">使用評論
	                <table id="ven-experience" style="width: 80%; font-size: 16px;">
					  
					</table>
				</div>
            </div>
        </div>
        
     </div>     
    </section>
    <!-- --------------------- 場地詳情內容 --------------------- -->
    
    
    
    
    
    <!-- --------------------- 預訂表單 --------------------- -->
    <div class="bookingform">
    <h1 class="form-title">預訂申請資料</h1>
    <h6 style="text-align: end; color: lightgrey;"><b>*為必填資料</b></h6>
    <form th:action="@{insert}" method="post" th:object="${venOrderVO}">
      
      <div class="main-user-info">
        <div class="user-input-box">
          <label for="memName">會員姓名</label>
          <span  id="memInfo" class="memName"></span>
          <input id="memId" type="hidden" th:field="*{memVO.memId}" th:value="${session.memId}" readonly/><br/>
        </div>

        <div class="user-input-box">
          <label for="memEmail">E-mail</label>
          <span id="memInfo" class="memEmail"></span>
        </div>
        
        <div class="user-input-box">
          <label for="orderDate">預訂日期</label>
          <span id="memInfo" class="orderDate"></span>
          <input id="orderDate" type="hidden" th:field="*{orderDate}" value="" readonly/><br/>
        </div>

        <div class="user-input-box">
          <label for="memPhone">手機號碼<span class="star">*</span></label>
          <input id="memPhone" type="text" th:field="*{memPhone}" /><br/>
          <span class="error" id="memPhone_errors"></span>
        </div>

        <div class="user-input-box">
          <label for="userCount">預估人數<span class="star">*</span></label>
          <input id="userCount" type="text" th:field="*{userCount}" required/><br/>
          <span class="error" id="userCount_errors"></span>
        </div>
        
        <div class="user-input-box">
          <label for="memTaxid">統一編號</label>
          <input id="taxid" type="text" th:field="*{memTaxid}" /><br/>
          <span class="error" id="taxid_error"></span>
<!--           <span  th:if="${#fields.hasErrors('memTaxid')}" th:errors="*{memTaxid}" class="error" id="memTaxid.errors"></span> -->
        </div>

      </div>

      <div class="user-input-box" style="width: 100%">
        <label>活動內容概述<span class="star">*</span></label>
        <textarea id="actDescr" class="actDescr_text" th:field="*{actDescr}" required/></textarea><br/>
        <span class="error" id="actDescr_errors"></span>
<!--         <span  th:if="${#fields.hasErrors('actDescr')}" th:errors="*{actDescr}" class="error" id="actDescr.errors"></span> -->
      </div>

      <div class="paytype-venue">
        <div class="pay-type-title">付款方式<span class="star">*</span></div>
        <div class="user-input-box" style="width: 50%;">
          <label for="venId" id="venId" style="font-size: 20px;">場地：<span id="memInfo" class="venId"></span></label>
          <input id="venueId" type="hidden" th:field="*{venVO.venId}" value="" readonly/><br/>
        </div>
      </div>
      
      <div class="pay-type-box">
        <div class="pay-type-category">
          <input type="radio" name="pay-type" id="credit" value="1" th:field="*{orderPayType}">
          <label for="credit">信用卡</label>
          <input type="radio" name="pay-type" id="transfer" value="2" th:field="*{orderPayType}">
          <label for="transfer">線上轉帳</label>
        </div>
        
        <div class="ven-res-fee" style="width: 50%;">
          <label for="venResFee">訂金：<span id="memInfo" class="venResFee"></span></label>
          <input id="halfprice" type="hidden" th:field="*{venResFee}" value="" readonly/><br/>
        </div>
      </div>
      
      <span class="error" id="account_number_error"></span>
      
      <!-- -------------------- 傳帳帳號 -------------------- -->
      <div class="transfer-number" style="display:none;">
        <h6>請轉入以下帳號：</h6>
            <label>做伙銀行 (888)</label>
            <br/>
            <label>1234-1234-1234-1234</label>
      </div>
       
      <!-- -------------------- 信用卡 -------------------- -->
      
      <div class="container-card" style="display:block;">
        <div class="credit">
            <div class="intern">
                <img class="approximation" src="/front-end/07/images/aprox.png" alt="aproximation">
                <img class="chip" src="/front-end/07/images/chip.png" alt="chip">
                <div class="card-number">
                    <label>Account Number</label>
                    <input id="account_number" class="number-vl" th:field="*{memCreditNum}" placeholder="1234123412341234" />
                </div>
                    
                <div class="card-holder">
                    <label>Holder</label>
                    <input id="Holder" class="number-vl" placeholder="Aaron" />
                </div>
                <div class="card-infos">
                    <div class="exp">
                        <label>valid-thru</label>
                        <input id="valid-thru" class="number-v2" placeholder="08/28" />
                    </div>
                    <div class="cvv">
                        <label>CVV</label>
                        <input id="CVV" class="number-v2" placeholder="123"/>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
      
      
      <div class="form-submit-btn">
        <input type="submit" value="確認送出">
      </div>

    </form>
  </div>
  <!-- --------------------- 預訂表單 --------------------- -->  

  </main>

  <div class="my-4"></div>

  <div class="container">
    <footer class="py-3 my-4">
      <ul class="nav justify-content-center border-bottom pb-3 mb-3">
        <li class="nav-item"><a href="activity.html" class="nav-link px-2 text-muted">首頁</a></li>
        <li class="nav-item"><a href="customer.html" class="nav-link px-2 text-muted">客服中心</a></li>
        <li class="nav-item"><a href="about.html" class="nav-link px-2 text-muted">關於我們</a></li>
      </ul>
      <p class="text-center text-muted">© 2023 Company, Inc</p>
    </footer>
  </div>

  <!-- 引入 Bootstrap JavaScript 文件 -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
    </script>

  <!-- 登入選項的Modal 彈窗 -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="loginModalLabel">會員登入</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- 在這裡加入登入表單的 HTML 代碼 -->
          <form>
            <!-- 登入表單的輸入欄位 -->
            <div class="mb-3">
              <label for="username" class="form-label">帳號：</label>
              <input type="text" class="form-control" id="username" name="username" placeholder="輸入您的帳號" required>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">密碼：</label>
              <div class="input-group">
                <input type="password" class="form-control" id="password" name="password" placeholder="輸入您的密碼" required>
                <!-- 在密碼輸入框右上方新增"忘記密碼"的連結 -->
                <a href="#" class="input-group-text" id="forgotPasswordLink">忘記密碼</a>
              </div>
            </div>
            <!-- 登入按鈕 -->
            <button type="submit" class="btn btn-primary">登入</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<!-- 載入 Font Awesome -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    let user = /*[[${session.memId}]]*/'';
    /*]]>*/
    /*<![CDATA[*/
    let venReady = /*[[${venVO}]]*/'';
    /*]]>*/
    /*<![CDATA[*/
    let ovReady = /*[[${venOrderVO}]]*/'';
    /*]]>*/
    
</script>


<script>

$(document).ready(async function(){
	console.log(venReady);
	console.log(ovReady);

	await getAll();
	
	if(venReady){
		getVen(venReady.venName);
		await getClosedbyVen(venReady.venName);
		$("#venuepicker").val(venReady.venName);
		$("span.venId").html("");
        $("span.venId").html(`${venReady.venName}`);
		datepicker();
		
	}else {
        // 顯示第一筆場地資訊
//         ----------------------getVen(vens[0].venName);
    }
	
	if(user && user !== ""){
	    await getMemInfo(user);
	}
	
});



var ordereddate;
var closeddates;
var dates = [];

// 取得所有場地資訊
async function getAll(){
    await fetch("/front_end/venue/all", {
        method: "GET",
        }).then(function(response){;
            return response.json();
        }).then(function(vens){     
            if(vens.length > 0){
                $("#ven-user").html("");   
                $("#ven-user").append(`<option value="" selected>請選擇場地</option>`);
                for(let ven of vens){
                    $(".form-select").append(`<option value="${ven.venName}">${ven.venName}</option>`);                       
                }
            } else {
            	$("#venuepicker").html("");  
                $("#venuepicker").append(`<option value="" selected>無場地可租用</option>`);
                $("#venue-rental").empty();
                $("#venue-rental").append(`<div style="width: 100%; height: 100px; display: flex; justify-content: center; align-items: center; text-align: center; background-color: lightgray; font-size: 30px; font-weight: bold; border-radius: 5px;">
                		                   無場地可租用</div>`);
            }
        }).catch(function(err){
            console.log(err);
        }); 
}

function datepicker() {
   
        dates=[];
        $('#datepicker').datepicker('destroy');
        console.log(ordereddate);
        for(let date of ordereddate){
            dates.push(date.orderDate);
        }
        for(let date of closeddates){
            dates.push(date.closedDate);
        }
        console.log(dates);
        
        initDatePicker();	
};

// 變更場地可預訂的日期
function initDatePicker(){
    $("#datepicker").datepicker({
        beforeShowDay: DisableDates,
    });
}
function DisableDates(date) {
    var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
    return [dates.indexOf(string) == -1];
}


// 取得會員資訊
async function getMemInfo(id){
    await fetch("/front_end/venue/getMemInfo", {
        method: "POST",
        body: JSON.stringify({memId: id})
        }).then(function(response){;
            return response.json();
        }).then(function(mem){ 
            $("span.memName").html("");
            $("span.memName").html(`${mem.memName}`);
            $("span.memEmail").html("");
            $("span.memEmail").html(`${mem.memEmail}`);
            $("#memPhone").val(`${mem.memPhone}`);
            $("#credit").prop('checked', true);
        }).catch(function(err){
            console.log(err);
        }); 
}


// 傳入日期取得可預訂單場地資訊
async function getOrderVen(date){
    await fetch("/front_end/venue/orderVen", {
        method: "POST",
        body: JSON.stringify({orderDate: date})
        }).then(function(response){;
            return response.json();
        }).then(function(vens){    
        	if(!vens || vens.length === 0){
                $("#venuepicker").html("");  
                $("#venuepicker").prop("disabled", true);
                $("#venuepicker").append(`<option value="" selected>無場地可租用</option>`);
                $("#venue-rental").empty();
                $("#venue-rental").append(`<div style="width: 100%; height: 100px; display: flex; justify-content: center; align-items: center; text-align: center; background-color: lightgray; font-size: 30px; font-weight: bold; border-radius: 5px;">
                                           無場地可租用</div>`);
            } else {
	            // 顯示第一筆場地資訊
	            getVen(vens[0].venName);
	            getVenCom(vens[0].venId);
	            
	            $(".form-select").empty();   
	            $(".form-select").append(`<option value="" selected>請選擇場地</option>`);
	            for(let ven of vens){
	                $(".form-select").append(`<option value="${ven.venName}">${ven.venName}</option>`);                       
	            }
            }
        }).catch(function(err){
            console.log(err);
        }); 
}


// 依場地名稱取得單一場地詳情資訊
async function getVen(name){
    await fetch("/front_end/venue/venType",{
        method: "POST",
        body: JSON.stringify({venName: name})
    }).then(function(response){;
        return response.json();
    }).then(function(ven){     
        // 清除清單內容
        $("#ven-name").html("");
        $("#ven-name").html(`${ven.venName}`);
        $("#ven-photo").attr("src", "");
        $("#ven-photo").attr("src", `data:image/jpeg;base64,${ven.venPic}`);
        $("#ven-location").html("");
        $("#ven-location").html(`地點：${ven.venLoc}`);
        $("#ven-descr").html("");
        $("#ven-descr").html(`${ven.venDescr}`);
        $("#ven-price").html("");
        $("#ven-price").html(`租金：＄${ven.venPrice} / 天`);
                   
        $("#ven-star").html("");
        $("#ven-star").html(`${ven.venTotRating}`);
        
        let starcount = ven.venTotRating;
        $(".star_block span").each(function(){
            $(this).empty();
            $(this).removeClass("-on");
            if (starcount >= 1){
                $(this).addClass("-on");
                $(this).append(`<i class="fas fa-star"></i>`);
            } else if(starcount > 0){ 
                $(this).addClass("-on");
                $(this).append(`<i class="fa-solid fa-star-half"></i>`);
            } else {
                $(this).append(`<i class="fas fa-star"></i>`);
            }
            starcount--;
            
        });
        getVenCom(ven.venId);
        
        let halfprice = parseFloat(ven.venPrice/2);
        $(".venResFee").html("");
        $(".venResFee").html(`＄${halfprice}`);
        $("#halfprice").val(halfprice);
        $("input#venueId").val(ven.venId);

    }).catch(function(err){
        console.log(err);
    }); 
}


// 查詢場地使用評論
async function getVenCom(id){
    await fetch("/front_end/venue/getVenCom", {
        method: "POST",
        body: JSON.stringify({venId: id})
        }).then(function(response){;
            return response.json();
        }).then(function(vens){    
        	
        	// 存入orderDate
        	ordereddate = vens;
        	console.log(ordereddate);
        	
            $("#ven-experience").empty();  
            for(let ven of vens){
                if(ven.venCom != null && ven.venComStatus != 2){
                $("#ven-experience").append(`
                        <thead id="comment">
                           <tr>
                            <th id="ven-user" style="width: 20%;">${ven.memVO.memName}</th>
                            <th id="ven-rating" style="width: 20%;">
                              <div id=${ven.venOrderId} class="com_star">
                                <span class="star" data-star="1"></span>
                                <span class="star" data-star="2"></span>
                                <span class="star" data-star="3"></span>
                                <span class="star" data-star="4"></span>
                                <span class="star" data-star="5"></span>
                              </div>
                            </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                            <td id="ven-com" style="padding-left: 20px;" colspan="2">${ven.venCom}</td>
                           </tr>
                        </tbody>`);
                
                let starcount = ven.venRating;
                let selector = "#" + ven.venOrderId + " span";
                $(selector).each(function(){
                    $(this).empty();
                    $(this).removeClass("-on");
                    if (starcount >= 1){
                        $(this).addClass("-on");
                        $(this).append(`<i class="fas fa-star"></i>`);
                    } else if(starcount > 0){ 
                        $(this).addClass("-on");
                        $(this).append(`<i class="fa-solid fa-star-half"></i>`);
                    } else {
                        $(this).append(`<i class="fas fa-star"></i>`);
                    }
                    starcount--;
                
                });
            }
            }
            
        }).catch(function(err){
            console.log(err);
        }); 
}

async function getClosedbyVen(name){
    await fetch("/front_end/ven-closed/getClosedbyVen",{
        method: "POST",
        body: JSON.stringify({venName: name})
    }).then(function(response){;
        return response.json();
    }).then(function(closed){
    	closeddates = closed;
    }).catch(function(err){
        console.log(err);
    });
}

  

//選擇日期變更事件
$('#datepicker').change(async function() {
    
    let selectedDate = $(this).val();
    let compareTime = new Date(selectedDate);
    
    let today = new Date();
    today.setDate(today.getDate() + 1);
    
    if (compareTime > today){
        $(".bookingform").css("display", "none");
        $("span.orderDate").html("");
        let month = selectedDate.substring(0,2);
        let day = selectedDate.substring(3,5);
        let year = selectedDate.substring(6,10);
        let cday = year + "-" + month + "-" + day;
        $("span.orderDate").html(`${cday}`);
        $("input#orderDate").val(cday);
//         await getOrderVen(selectedDate);
    }else {
        $(this).val("");
        alert("請選擇正確日期");           
    }
});


// 選擇場地變更事件
$('#venuepicker').change(async function() {
    var selectedVen = $(this).val();     
    dates=[];
    $('#datepicker').datepicker('destroy');
    $(".bookingform").css("display", "none");
    $("span.venId").html("");
    $("span.venId").html(`${selectedVen}`);
    await getVen(selectedVen);
    await getClosedbyVen(selectedVen);
    for(let date of ordereddate){
        dates.push(date.orderDate);
    }
    for(let date of closeddates){
    	dates.push(date.closedDate);
    }
//     console.log(dates);
    
    initDatePicker();
	
});




// 選擇信用卡
$("#credit").on("click", function(){
    $(".transfer-number").css("display", "none");
    $(".container-card").css("display", "block");
});
// 選擇轉帳
$("#transfer").on("click", function(){
    $(".container-card").css("display", "none");
    $(".transfer-number").css("display", "block");
});

// 點擊立即預訂
$("#bookingnow").on("click", function(){
	if(!user) {
	    alert("請登入會員");  
	    return;
	}else{
		$("input#memId").val(user);
	}
	let date = $("#datepicker").val();
	let venpicked = $("#venuepicker").val();
	
	if(date !== "" && venpicked !== ""){
	    $(".bookingform").css("display", "block");
	    // 將頁面滾動到預定表單
	    var formBottom = $(".bookingform").offset().top;
	    $("html, body").animate({ scrollTop: formBottom }, "fast"); 
	}else{
	    alert("請選擇日期和場地");  
	}
  
});	


$(document).ready(function() {
    
    $("#memPhone").focus(function(){
        $("#memPhone_errors").hide();
    });
    
    $(".bookingform").submit(function() {
        
        var memPhoneValue = $("#memPhone").val();
        
        if ((/^\d{10}$/.test(memPhoneValue.trim()))) {
            $("#memPhone_errors").hide();
            return true;
        }else{
            $("#memPhone_errors").text("請填入正確手機號碼").show();
            return false;
        } 
    });
});


$(document).ready(function() {
	
	$("#userCount").focus(function(){
		$("#userCount_errors").hide();
	});
	
    $(".bookingform").submit(function() {
    	
        var userCountValue = $("#userCount").val();
        
        if ((/^\d{2}$/.test(userCountValue.trim()))) {
            $("#userCount_errors").hide();
            return true;
        }else{
            $("#userCount_errors").text("請填入正確人數").show();
            return false;
        } 
    });
});
  

    
$(document).ready(function() {
	
	$("#taxid").focus(function(){
	    $("#taxid_error").hide();
	});
	
    $(".bookingform").submit(function() {
        
    	var taxidValue = $("#taxid").val();
        
    	if ((/^\d{8}$/.test(taxidValue.trim())) || taxidValue.trim() == "") {
            $("#taxid_error").hide();
            return true;
        } else {
            $("#taxid_error").text("統一編號輸入錯誤").show();
            return false;
        }
    });
});
   

$(document).ready(function() {
	
	$("#account_number").focus(function(){
	    $("#account_number_error").hide();
	});
	
    $(".bookingform").submit(function() {
        
    	var accountNumberValue = $("#account_number").val();
        
    	if ((/^\d{16}$/.test(accountNumberValue.trim()))) {
    		$("#account_number_error").hide();
            return true;
        } else {
            $("#account_number_error").text("信用卡帳戶號碼輸入錯誤").show();
            return false;
        }
    });
});

	
// form表單顯示訂金
function getPrice() {
   pick = $("#venid").val();
   if (pick == 0){
       document.getElementById('viewPrice').innerHTML = "";
   } else {
       let p = $("#venid").find(":selected").first().text().split("＄")[1];
       let halfprice = (parseFloat(p)/2).toFixed(2);
       $("#price").val(halfprice);
       document.getElementById('viewPrice').innerHTML = '$ '+ halfprice +' .US';
   }
   
}	

  </script>
</body>

</html>